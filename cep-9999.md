# CEP ???? - Names in conda packages and channels

<table>
<tr><td> Title </td><td> CEP ???? - Names in conda packages and channels </td>
<tr><td> Status </td><td> Draft </td></tr>
<tr><td> Author(s) </td><td> Jaime Rodr√≠guez-Guerra &lt;jaime.rogue@gmail.com&gt; <br /> Matthew R. Becker &lt;becker.mr@gmail.com&gt;</td></tr>
<tr><td> Created </td><td> Mar 11, 2025</td></tr>
<tr><td> Updated </td><td> Mar 11, 2025</td></tr>
<tr><td> Discussion </td><td> N/A </td></tr>
<tr><td> Implementation </td><td> N/A </td></tr>
</table>

## Abstract

This CEP aims to standardize names and other strings used throughout the conda ecosystem.

## Specification

### Artifacts

The conda ecosystem distinguishes between two types of packages:

- Regular package names: represented by a concrete, downloadable, extractable conda artifact.
- Virtual package names: not backed by any physical artifact. They only exist on the client side.

### Package names

A regular package name MUST only consist of lowercase ASCII letters, numbers, hyphens, periods and underscores. It MUST start with a letter, a number, or a single underscore. It MUST NOT include two consecutive separators (hyphen, period, underscore). 

Virtual package names MUST only consist of lowercase ASCII letters, numbers, hyphens, periods and underscores. They MUST NOT use two consecutive separators, with one exception: they MUST start with two underscores.

This means that regular package names MUST match the following case-insensitive regex: `^(([a-z0-9])|([a-z0-9_](?!_)))[._-]?([a-z0-9]+(\.|-|_|$))*$`.

Virtual package names MUST follow this other regex: `^__[a-z0-9][._-]?([a-z0-9]+(\.|-|_|$))*$`.

### Version strings

Version strings MUST only consist of digits, periods, lowercase ASCII letters, underscores, plus
signs and exclamation marks. Additional rules apply but are out of scope in this CEP and will be
discussed separately.

### Build strings

Builds strings MUST only consist of ASCII letters, numbers, periods, and underscores. They MUST match this regex `^[a-zA-Z0-9_\.]+$`.

### Filenames

Regular conda artifacts MUST be named following this scheme:

```
<package name>-<version string>-<build string>.<extension>
```

Virtual conda packages SHOULD NOT need filename standardization.

### Channels

#### Channel names

Channel names MUST only consist of lowercase ASCII letters, numbers, hyphens, periods and underscores. They MUST start and end with a letter or a digit. In other words, they MUST match  this regex:  `^[a-z0-9]+((-|_|.)[a-z0-9]+)*$`.

#### Label names

Channel label names MUST only consist of ASCII letters, digits, underscores, hyphens, slashes, periods, colons and whitespace. They MUST start with a letter. They MUST match this regex: `^[a-zA-Z][0-9a-zA-Z_\-\.\/:\s]*`. Even if allowed, label names SHOULD NOT contain any whitespace.

#### Subdir names

Platform or subdir names MUST only consist of lowercase ASCII letters, numbers, hyphens, underscores and periods. They MUST start and end with a letter or a number. They MUST match this regex: `^[a-z0-9]+((-|_|.)[a-z0-9]+)*$`.

## Backwards compatibility

The conda channel, subdir, label, and package name regexes are backwards compatible with the current `conda` implementation (25.3) and all existing packages on the `defaults` and `conda-forge` channels, except the `__anaconda_core_depends` package on the `defaults` channel.

The regex for labels above was pulled from an anaconda.org error message describing the set of valid labels. Finally, anaconda.org usernames/channel names are case insensitive and cannot begin with an underscore.

## Copyright

All CEPs are explicitly [CC0 1.0 Universal](https://creativecommons.org/publicdomain/zero/1.0/).
